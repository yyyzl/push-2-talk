# PushToTalk - è¯­éŸ³è¾“å…¥åŠ©æ‰‹

<div align="center">

**æŒ‰ä½å¿«æ·é”®è¯´è¯ï¼Œæ¾å¼€è‡ªåŠ¨è½¬å½•å¹¶æ’å…¥æ–‡æœ¬**

[![Tauri](https://img.shields.io/badge/Tauri-2.0-blue.svg)](https://tauri.app/)
[![React](https://img.shields.io/badge/React-18-blue.svg)](https://react.dev/)
[![Rust](https://img.shields.io/badge/Rust-1.70+-orange.svg)](https://www.rust-lang.org/)

</div>

---

PushToTalk æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„æ¡Œé¢è¯­éŸ³è¾“å…¥å·¥å…·ã€‚å®ƒä¸ä»…ä»…æ˜¯ä¸€ä¸ªè¯­éŸ³è½¬æ–‡å­—å·¥å…·ï¼Œæ›´é›†æˆäº†å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰èƒ½åŠ›ã€‚ä½ å¯ä»¥æŒ‰ä½ **Ctrl+Win** è¯´è¯ï¼Œæ¾å¼€ååº”ç”¨ä¼šè‡ªåŠ¨å°†ä½ çš„è¯­éŸ³è½¬ä¸ºæ–‡å­—ï¼Œå¹¶æ ¹æ®ä½ çš„è®¾å®šè¿›è¡Œ**æ¶¦è‰²ã€ç¿»è¯‘æˆ–æ•´ç†æˆé‚®ä»¶**ï¼Œæœ€åè‡ªåŠ¨ç²˜è´´åˆ°å½“å‰å…‰æ ‡ä½ç½®ã€‚

### âœ¨ æ ¸å¿ƒç‰¹æ€§

- âš¡ **å®æ—¶æµå¼è½¬å½•** - é‡‡ç”¨ WebSocket è¾¹å½•è¾¹ä¼ ï¼Œæä½å»¶è¿Ÿï¼Œæ¾æ‰‹å³å‡ºå­—ã€‚
- ğŸ§  **LLM æ™ºèƒ½åå¤„ç†** - å†…ç½® "æ–‡æœ¬æ¶¦è‰²"ã€"é‚®ä»¶æ•´ç†"ã€"ä¸­è¯‘è‹±" ç­‰é¢„è®¾ï¼Œæ”¯æŒè‡ªå®šä¹‰ Promptã€‚
- ğŸ¤ **å…¨å±€å¿«æ·é”®** - åœ¨ä»»ä½•åº”ç”¨ä¸­ï¼ˆåŒ…æ‹¬å…¨å±æ¸¸æˆæˆ– IDEï¼‰æŒ‰ä½ `Ctrl+Win` å³å¯å½•éŸ³ã€‚
- ğŸ”„ **åŒæ¨¡å¼•æ“ & è‡ªåŠ¨å¤‡å¤‡** - é»˜è®¤ä½¿ç”¨ Qwen Realtime å¼•æ“ï¼Œç½‘ç»œä¸ä½³æ—¶è‡ªåŠ¨é™çº§åˆ° HTTP æ¨¡å¼ï¼Œå¹¶æ”¯æŒ SiliconFlow (SenseVoice) ä½œä¸ºå¤‡ç”¨æ¸ é“ã€‚
- ğŸ”Š **éŸ³é¢‘åé¦ˆ** - å½•éŸ³å¼€å§‹/ç»“æŸæ—¶çš„æ¸…è„†æç¤ºéŸ³ï¼Œç›²æ“ä¹Ÿæ”¾å¿ƒã€‚
- ğŸ’¾ **å¤šé…ç½®ç®¡ç†** - æ”¯æŒä¿å­˜å¤šå¥— LLM é¢„è®¾ï¼Œé€šè¿‡ç•Œé¢å¿«é€Ÿåˆ‡æ¢ä¸åŒåœºæ™¯ã€‚

---

## ğŸ¬ å¿«é€Ÿå¼€å§‹

### å®‰è£…

1. ä¸‹è½½æœ€æ–°ç‰ˆæœ¬çš„å®‰è£…åŒ…ï¼ˆä½äº `src-tauri/target/release/bundle/`ï¼‰ï¼š
   - MSI å®‰è£…åŒ…ï¼š`PushToTalk_0.1.0_x64_en-US.msi`
   - NSIS å®‰è£…ç¨‹åºï¼š`PushToTalk_0.1.0_x64-setup.exe`

2. è¿è¡Œå®‰è£…ç¨‹åºå®Œæˆå®‰è£…

3. âš ï¸ **é‡è¦**ï¼šå³é”®ç‚¹å‡»åº”ç”¨å›¾æ ‡ï¼Œé€‰æ‹©"ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ"

### é…ç½®

1. å¯åŠ¨åº”ç”¨ï¼Œç‚¹å‡»å³ä¸Šè§’è®¾ç½®å›¾æ ‡ã€‚
2. **ASR é…ç½®**: è¾“å…¥é˜¿é‡Œäº‘ DashScope API Key (å¿…å¡«)ã€‚
3. **LLM é…ç½®** (å¯é€‰): å¼€å¯ "LLM æ™ºèƒ½æ¶¦è‰²"ï¼Œè¾“å…¥å¯¹åº”çš„ API Key (æ”¯æŒ DashScope æˆ–å…¶ä»– OpenAI å…¼å®¹æ¥å£)ã€‚
4. ç‚¹å‡» "ä¿å­˜é…ç½®" å¹¶ "å¯åŠ¨åŠ©æ‰‹"ã€‚

### ä½¿ç”¨

1. å°†å…‰æ ‡å®šä½åœ¨ä»»ä½•è¾“å…¥æ¡†ï¼ˆå¾®ä¿¡ã€Wordã€VS Codeï¼‰ã€‚
2. æŒ‰ä½ **`Ctrl` + `Win`** é”®ï¼Œå¬åˆ° "æ»´" å£°åå¼€å§‹è¯´è¯ã€‚
3. è¯´å®Œæ¾å¼€æŒ‰é”®ï¼Œå¬åˆ°ç»“æŸæç¤ºéŸ³ã€‚
4. ç­‰å¾…ç‰‡åˆ»ï¼Œå¤„ç†åçš„æ–‡æœ¬å°†è‡ªåŠ¨æ‰“å­—ä¸Šå±ã€‚

---

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### å‰ç«¯
- **React 18** - UI æ¡†æ¶
- **TypeScript** - ç±»å‹å®‰å…¨
- **Tailwind CSS** - æ ·å¼æ¡†æ¶
- **Vite** - æ„å»ºå·¥å…·

### åç«¯ (Rust)
- **Tauri 2.0** - è·¨å¹³å°æ¡Œé¢æ¡†æ¶
- **rdev** - å…¨å±€é”®ç›˜ç›‘å¬
- **cpal** - å®æ—¶éŸ³é¢‘å½•åˆ¶
- **hound** - WAV éŸ³é¢‘å¤„ç†
- **reqwest** - HTTP å®¢æˆ·ç«¯
- **arboard** - å‰ªè´´æ¿æ“ä½œ
- **enigo** - è¾“å…¥æ¨¡æ‹Ÿ

### AI æœåŠ¡
- **Alibaba Qwen ASR** - è¯­éŸ³è¯†åˆ« API

---

## âš™ï¸ é«˜çº§é…ç½®

### ASR (è¯­éŸ³è¯†åˆ«)
- **å®æ—¶æµå¼æ¨¡å¼**: æ¨èå¼€å¯ã€‚å»¶è¿Ÿæœ€ä½ï¼Œä½“éªŒæœ€å¥½ã€‚
- **SiliconFlow (å¤‡ç”¨)**: å¯é€‰é…ç½®ã€‚å½“é˜¿é‡Œäº‘æœåŠ¡ä¸å¯ç”¨æ—¶ï¼Œè‡ªåŠ¨å°è¯•ä½¿ç”¨ SiliconFlow çš„ SenseVoice æ¨¡å‹è¿›è¡Œè½¬å½•ã€‚

### LLM (æ–‡æœ¬æ¶¦è‰²)
ä½ å¯ä»¥å®šä¹‰ä¸åŒçš„é¢„è®¾æ¥å¤„ç†è¯†åˆ«åçš„æ–‡æœ¬ï¼š
- **æ–‡æœ¬æ¶¦è‰²**: å»é™¤å£è¯­è¯ï¼ˆå—¯ã€å•Šï¼‰ï¼Œä¿®æ­£æ ‡ç‚¹ï¼Œä½¿è¯­å¥é€šé¡ºã€‚
- **ä¸­è¯‘è‹±**: ç›´æ¥å°†ä¸­æ–‡è¯­éŸ³ç¿»è¯‘æˆåœ°é“çš„è‹±æ–‡è¾“å‡ºã€‚
- **é‚®ä»¶æ•´ç†**: å°†å£è¯­åŒ–çš„æŒ‡ä»¤è½¬æ¢ä¸ºæ­£å¼çš„é‚®ä»¶æ ¼å¼ã€‚

å¯ä»¥åœ¨è®¾ç½®ç•Œé¢æ·»åŠ ã€åˆ é™¤æˆ–ä¿®æ”¹è¿™äº›é¢„è®¾çš„ System Promptã€‚

---

## ğŸš€ å¼€å‘æŒ‡å—

### ç¯å¢ƒè¦æ±‚

- **Node.js** >= 18.0.0
- **Rust** >= 1.70.0
- **Windows** 10/11 (64-bit)

### å¼€å‘ç¯å¢ƒæ­å»º

```bash
# 1. å…‹éš†é¡¹ç›®
git clone <repository-url>
cd push-2-talk

# 2. å®‰è£…å‰ç«¯ä¾èµ–
npm install

# 3. è¿è¡Œå¼€å‘æœåŠ¡å™¨ï¼ˆéœ€è¦ç®¡ç†å‘˜æƒé™ï¼‰
npm run tauri dev
```

### æ„å»ºç”Ÿäº§ç‰ˆæœ¬

```bash
npm run tauri build
```

ç”Ÿæˆçš„å®‰è£…åŒ…ä½äºï¼š`src-tauri/target/release/bundle/`

### æµ‹è¯• API

ä½¿ç”¨ç‹¬ç«‹çš„æµ‹è¯•å·¥å…·éªŒè¯ Qwen ASR APIï¼š

```bash
cd src-tauri
cargo run --bin test_api
```

è¯¦ç»†è¯´æ˜è¯·å‚è€ƒ [æµ‹è¯•å·¥å…·ä½¿ç”¨è¯´æ˜.md](./æµ‹è¯•å·¥å…·ä½¿ç”¨è¯´æ˜.md)

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
â”œâ”€â”€ src
â”‚   â”œâ”€â”€ App.tsx
â”‚   â”œâ”€â”€ index.css
â”‚   â””â”€â”€ main.tsx
â”œâ”€â”€ src-tauri
â”‚   â”œâ”€â”€ capabilities
â”‚   â”‚   â””â”€â”€ default.json
â”‚   â”œâ”€â”€ gen
â”‚   â”‚   â””â”€â”€ schemas
â”‚   â”‚       â”œâ”€â”€ acl-manifests.json
â”‚   â”‚       â”œâ”€â”€ capabilities.json
â”‚   â”‚       â”œâ”€â”€ desktop-schema.json
â”‚   â”‚       â””â”€â”€ windows-schema.json
â”‚   â”œâ”€â”€ icons
â”‚   â”‚   â””â”€â”€ icon.ico
â”‚   â”œâ”€â”€ src
â”‚   â”‚   â”œâ”€â”€ audio_recorder.rs
â”‚   â”‚   â”œâ”€â”€ beep_player.rs
â”‚   â”‚   â”œâ”€â”€ config.rs
â”‚   â”‚   â”œâ”€â”€ hotkey_service.rs
â”‚   â”‚   â”œâ”€â”€ lib.rs
â”‚   â”‚   â”œâ”€â”€ llm_post_processor.rs
â”‚   â”‚   â”œâ”€â”€ main.rs
â”‚   â”‚   â”œâ”€â”€ qwen_asr.rs
â”‚   â”‚   â”œâ”€â”€ qwen_realtime.rs
â”‚   â”‚   â”œâ”€â”€ streaming_recorder.rs
â”‚   â”‚   â”œâ”€â”€ test_api.rs
â”‚   â”‚   â””â”€â”€ text_inserter.rs
â”‚   â”œâ”€â”€ target
â”‚   â”œâ”€â”€ build.rs
â”‚   â”œâ”€â”€ Cargo.toml
â”‚   â”œâ”€â”€ tauri.conf.json
â”‚   â””â”€â”€ test_bin.toml
â”œâ”€â”€ CLAUDE.md
â”œâ”€â”€ index.html
â”œâ”€â”€ package-lock.json
â”œâ”€â”€ package.json
â”œâ”€â”€ postcss.config.js
â”œâ”€â”€ README.md
â”œâ”€â”€ tailwind.config.js
â”œâ”€â”€ tsconfig.json
â””â”€â”€ vite.config.ts
```

---

## âš™ï¸ é…ç½®è¯´æ˜

### é…ç½®æ–‡ä»¶ä½ç½®
```
%APPDATA%\PushToTalk\config.json
```

### é…ç½®æ–‡ä»¶æ ¼å¼
```json
{
  "dashscope_api_key": "sk-your-api-key-here"
}
```

### è·å– API Key

1. è®¿é—® [é˜¿é‡Œäº‘ DashScope æ§åˆ¶å°](https://dashscope.console.aliyun.com/)
2. æ³¨å†Œ/ç™»å½•è´¦å·
3. åˆ›å»º API Key
4. å¤åˆ¶ Key å¹¶ç²˜è´´åˆ°åº”ç”¨ä¸­

---

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### å‰ç«¯ (UI)
- **React 18 + TypeScript**: ç»„ä»¶åŒ–å¼€å‘ã€‚
- **Tailwind CSS**: ç°ä»£åŒ–æ ·å¼ï¼Œæ¯›ç»ç’ƒæ•ˆæœã€‚
- **Lucide React**: ç²¾ç¾å›¾æ ‡åº“ã€‚
- **Zustand**: (è®¡åˆ’ä¸­) çŠ¶æ€ç®¡ç†ã€‚

### åç«¯ (Rust Core)
- **Tauri 2.0**: ä¸‹ä¸€ä»£åº”ç”¨æ¡†æ¶ï¼Œå®‰å…¨ä¸”ä½“ç§¯å°ã€‚
- **cpal**: è·¨å¹³å°åº•å±‚éŸ³é¢‘æµæ•è·ã€‚
- **tokio-tungstenite**: å¼‚æ­¥ WebSocket å®¢æˆ·ç«¯ï¼Œå¤„ç†å®æ—¶éŸ³é¢‘æµã€‚
- **reqwest**: å¼‚æ­¥ HTTP å®¢æˆ·ç«¯ï¼Œå¤„ç† API è¯·æ±‚ã€‚
- **rdev**: å…¨å±€é”®ç›˜é’©å­ (Global Hooks)ã€‚
- **rodio**: éŸ³é¢‘æ’­æ”¾ (ç”¨äºæç¤ºéŸ³)ã€‚
- **arboard & enigo**: å‰ªè´´æ¿æ“ä½œä¸é”®ç›˜æ¨¡æ‹Ÿã€‚

---

## ğŸ¯ ä½¿ç”¨æŠ€å·§

### æœ€ä½³å®è·µ

1. **å½•éŸ³ç¯å¢ƒ** - åœ¨å®‰é™ç¯å¢ƒä¸‹å½•éŸ³ï¼Œæ¸…æ™°å‘éŸ³
2. **æ–‡æœ¬æ’å…¥** - ç¡®ä¿ç›®æ ‡çª—å£å¤„äºæ´»åŠ¨çŠ¶æ€ï¼Œå…‰æ ‡å¯è§
3. **å¿«æ·é”®ä½¿ç”¨** - æŒ‰ä½å®Œæ•´ç»„åˆé”®ï¼ˆCtrl+Winï¼‰å†è¯´è¯

### å¸¸è§é—®é¢˜

**Q: æŒ‰å¿«æ·é”®æ²¡æœ‰ååº”ï¼Ÿ**
- A: ç¡®ä¿ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œåº”ç”¨

**Q: è½¬å½•å¤±è´¥ï¼Ÿ**
- A: æ£€æŸ¥ç½‘ç»œè¿æ¥å’Œ API Key æ˜¯å¦æœ‰æ•ˆã€‚åº”ç”¨ä¼šè‡ªåŠ¨é‡è¯•æœ€å¤š3æ¬¡

**Q: è½¬å½•ä¸€ç›´å¤„äº"è½¬å½•ä¸­"çŠ¶æ€ï¼Ÿ**
- A: åº”ç”¨æœ‰10ç§’è¶…æ—¶æœºåˆ¶ï¼Œè¶…æ—¶åä¼šè‡ªåŠ¨é‡è¯•ã€‚å¦‚æœæŒç»­å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œå’ŒAPIæœåŠ¡çŠ¶æ€

**Q: æ–‡æœ¬æœªæ’å…¥ï¼Ÿ**
- A: ç¡®ä¿ç›®æ ‡åº”ç”¨çª—å£å¤„äºå‰å°ä¸”å…‰æ ‡å¯è§

---

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

| æŒ‡æ ‡ | å®æ—¶æ¨¡å¼ (Realtime) | HTTP æ¨¡å¼ |
|------|-------------------|-----------|
| **é¦–å­—å»¶è¿Ÿ** | < 500ms | ~1.5s |
| **è½¬å½•ç²¾åº¦** | 98%+ (Qwen3) | 98%+ (SenseVoice/Qwen) |
| **å†…å­˜å ç”¨** | ~65MB | ~60MB |
| **ç½‘ç»œæ¶ˆè€—** | æŒç»­å°åŒ…ä¼ è¾“ | å•æ¬¡å¤§åŒ…ä¼ è¾“ |
---


## ğŸ™ è‡´è°¢

æ„Ÿè°¢ä»¥ä¸‹å¼€æºé¡¹ç›®å’ŒæœåŠ¡ï¼š

- [Tauri](https://tauri.app/) - å¼ºå¤§çš„æ¡Œé¢åº”ç”¨æ¡†æ¶
- [Alibaba Cloud](https://www.aliyun.com/) - æä¾› Qwen ASR æœåŠ¡
- [Rust Audio](https://github.com/RustAudio) - éŸ³é¢‘å¤„ç†åº“
- æ‰€æœ‰è´¡çŒ®è€…å’Œç”¨æˆ·çš„æ”¯æŒ

---

## ğŸ“„ è®¸å¯è¯

MIT

---

<div align="center">

**â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™å®ƒä¸€ä¸ª Starï¼**

Made with â¤ï¸ by PushToTalk Team

</div>
